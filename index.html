<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Josue Cespedes</title>
    <style type="text/css">
        #container{
            background-color: antiquewhite;
            max-width: 990px;
            margin: 0 auto;
            padding: 2em;
            text-align: center;
        }
        button{
            background: #ccc;
            padding: 0.5em;
            margin: 0 auto;
        }
        table{
            width: 500px;
            margin: 0 auto;
            margin-top: 1em;
            border-collapse: collapse;
        }
        table caption{
            background-color: #ccc;
        }
        table, th, td{
            border: 1px solid grey
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="botones">
            <button onclick="colocarDatos()">Mostrar Estudiantes</button>
            <button onclick="mostrarPromedio()">Calcular Nota Promedio</button>
            <button onclick="mostrarMayorNota()">Calcular Mayor Nota</button>
            <button onclick="mostrarMenorNota()">Calcular Menor Nota</button>
        </div>
        <div id="lista">
            

        </div>
    </div>
    <script>
        var estudiantes = [{
            "codigo" : "0001",
            "nombre" : "Juan Perez",
            "nota" : 91
        },{
            "codigo" : "0002",
            "nombre" : "Jose Almonte",
            "nota" : 86
        },{
            "codigo" : "0003",
            "nombre" : "Ester Cespedes",
            "nota" : 89
        },{
            "codigo" : "0004",
            "nombre" : "Rufino Acosta",
            "nota" : 88
        },{
            "codigo" : "0005",
            "nombre" : "Marina Angomas",
            "nota" : 98
        },{
            "codigo" : "0006",
            "nombre" : "Wandy Hierro",
            "nota" : 92
        },{
            "codigo" : "0007",
            "nombre" : "Sonia Thomas",
            "nota" : 87
        },{
            "codigo" : "0008",
            "nombre" : "Gledy Castillo",
            "nota" : 95
        },{
            "codigo" : "0009",
            "nombre" : "Nery Hernandez",
            "nota" : 93
        },{
            "codigo" : "0010",
            "nombre" : "Bernabe Cruz",
            "nota" : 81
        }]

        function leerDatos (json){
            title = "Lista de Estudiantes"
            var dato = "";
            var i;
            for(i=0;i<json.length;i++){
                dato += "<tr><td>"+json[i].codigo+"</td><td>"+json[i].nombre+"</td><td>"+json[i].nota+"</td></tr>";
            }
            tabular(title,dato);
        }
        function calcularPromedio(json){
            title = "Promedio"
            var dato = "";
            var i;
            var promedio = 0.0;
            for(i=0;i<json.length;i++){
               promedio += json[i].nota
            }
            dato = promedio/json.length;
            tabular(title, dato)            
        }
        function calcularMayorNota(json){
            title = "Nota más alta";
            var dato = "";
            var i;
            notas = []
            for(i=0;i<json.length;i++){
             notas.push(json[i].nota)
            }
            var maximo = Math.max.apply(null , notas);
            for(i=0;i<json.length;i++){
                if(json[i].nota === maximo){
                    dato += "<tr><td>"+json[i].codigo+"</td><td>"+json[i].nombre+"</td><td>"+json[i].nota+"</td></tr>";
                }
                tabular(title,dato)
            }                
        }
        function calcularMenorNota(json){
            title = "Nota más baja";
            var dato = "";
            var i;
            notas = []
            for(i=0;i<json.length;i++){
             notas.push(json[i].nota)
            }
            var minimo = Math.min.apply(null , notas);            
            for(i=0;i<json.length;i++){
                if(json[i].nota === minimo){
                    dato += "<tr><td>"+json[i].codigo+"</td><td>"+json[i].nombre+"</td><td>"+json[i].nota+"</td></tr>";
                }
                tabular(title, dato)
            }        
        }
        function tabular(title,info) {
            if(title ==="Promedio"){
                var plantilla = "<table><caption><h3>"+title+"</h3></caption><tr><th>Nota Promedio</th></tr><tr><td>"+info+"</td></tr></table>"
            }else{
                var plantilla = "<table><caption><h3>"+title+"</h3></caption><tr><th>Código</th><th>Nombre</th><th>Nota</th></tr>"+info+"</table>"
            }
            document.getElementById("lista").innerHTML = plantilla
        }
        function colocarDatos(){
             leerDatos(estudiantes);
        }
        function mostrarPromedio(){
            calcularPromedio(estudiantes);
        }
        function mostrarMayorNota(){
            calcularMayorNota(estudiantes)
        }
        function mostrarMenorNota(){
            calcularMenorNota(estudiantes)
        }
    </script>
</body>
</html>